version: 18.12

branches:
  only:
  - master

image: Visual Studio 2017
configuration: Release

dotnet_csproj:
  patch: true
  file: '**\*.csproj'
  version: '{version}'
  package_version: '{version}'
  assembly_version: '{version}'
  file_version: '{version}'
  informational_version: '{version}'

before_build:
- cmd: >-
    appveyor-retry dotnet restore

build:
  verbosity: minimal

test_script:
- cmd: >-
    dotnet build .\MediaInfo.Wrapper.Tests\MediaInfo.Wrapper.Tests.csproj /p:Configuration=Release

    dotnet test .\MediaInfo.Wrapper.Tests\MediaInfo.Wrapper.Tests.csproj /p:Configuration=Release

artifacts:
- path: .\MediaInfo.Wrapper\bin\Release\*.nupkg
  name: package